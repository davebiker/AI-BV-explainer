<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Brand Visibility ‚Äì ≈†KODA X</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
html,body,#root{height:100%}
@keyframes blink{0%,100%{opacity:1}50%{opacity:0}}
@keyframes fadeInUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes pulse{0%,100%{box-shadow:0 0 0 0 rgba(74,222,128,0.3)}50%{box-shadow:0 0 0 14px rgba(74,222,128,0)}}
@keyframes pulseBlue{0%,100%{box-shadow:0 0 0 0 rgba(33,150,243,0.3)}50%{box-shadow:0 0 0 14px rgba(33,150,243,0)}}
@keyframes pulsePurple{0%,100%{box-shadow:0 0 0 0 rgba(156,39,176,0.3)}50%{box-shadow:0 0 0 14px rgba(156,39,176,0)}}
@keyframes pulseRed{0%,100%{box-shadow:0 0 0 0 rgba(244,67,54,0.3)}50%{box-shadow:0 0 0 14px rgba(244,67,54,0)}}
@keyframes pulseGreen{0%,100%{box-shadow:0 0 0 0 rgba(74,222,128,0.3)}50%{box-shadow:0 0 0 14px rgba(74,222,128,0)}}
@keyframes scanLine{0%{top:0}100%{top:100%}}
@keyframes scoreGlowGreen{0%,100%{text-shadow:0 0 20px rgba(74,222,128,0.5)}50%{text-shadow:0 0 40px rgba(74,222,128,0.8),0 0 60px rgba(74,222,128,0.3)}}
@keyframes scoreGlowYellow{0%,100%{text-shadow:0 0 20px rgba(250,204,21,0.5)}50%{text-shadow:0 0 40px rgba(250,204,21,0.8),0 0 60px rgba(250,204,21,0.3)}}
@keyframes scoreGlowOrange{0%,100%{text-shadow:0 0 20px rgba(251,146,60,0.5)}50%{text-shadow:0 0 40px rgba(251,146,60,0.8),0 0 60px rgba(251,146,60,0.3)}}
@keyframes scoreGlowRed{0%,100%{text-shadow:0 0 20px rgba(239,68,68,0.5)}50%{text-shadow:0 0 40px rgba(239,68,68,0.8),0 0 60px rgba(239,68,68,0.3)}}
@keyframes dotPulse{0%,100%{opacity:0.3}50%{opacity:1}}
@keyframes flowRight{0%{transform:translateX(-100%);opacity:0}30%{opacity:1}70%{opacity:1}100%{transform:translateX(200%);opacity:0}}
@keyframes btnPulse{0%,100%{box-shadow:0 4px 20px rgba(74,222,128,0.25)}50%{box-shadow:0 4px 32px rgba(74,222,128,0.45)}}
@keyframes iconPopIn{0%{transform:scale(0.7);opacity:0.3}50%{transform:scale(1.15)}100%{transform:scale(1);opacity:1}}
@keyframes logoGlow{0%,100%{box-shadow:0 0 20px rgba(74,222,128,0.2),0 0 40px rgba(74,222,128,0.1)}50%{box-shadow:0 0 30px rgba(74,222,128,0.4),0 0 60px rgba(74,222,128,0.2)}}
@keyframes logoAppear{0%{opacity:0;transform:scale(0.8)}60%{opacity:1;transform:scale(1.04)}100%{opacity:1;transform:scale(1)}}
@keyframes textSlideIn{0%{opacity:0;transform:translateX(-20px)}100%{opacity:1;transform:translateX(0)}}
@keyframes langFadeUp{0%{opacity:0;transform:translateY(24px)}100%{opacity:1;transform:translateY(0)}}
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel" data-type="module">
const {useState,useEffect,useRef,useCallback} = React;

var T = {
  cs: {
    title:"Brand Visibility",
    subtitle:"Jak funguje monitoring viditelnosti znaƒçky v odpovƒõd√≠ch umƒõl√© inteligence",
    steps:[
      {label:"Z√°kazn√≠k",sublabel:"pt√° se AI",btnText:"Z√°kazn√≠k se zept√° AI"},
      {label:"AI generuje",sublabel:"z natr√©novan√Ωch dat",btnText:"AI generuje z natr√©novan√Ωch dat"},
      {label:"AI odpovƒõƒè",sublabel:"generovan√Ω text",btnText:"AI vygeneruje odpovƒõƒè"},
      {label:"Monitoring",sublabel:"znaƒçky v odpovƒõdi",btnText:"Skenujeme zm√≠nky"},
      {label:"Visibilita",sublabel:"sk√≥re znaƒçky",btnText:"Vypoƒç√≠t√°me sk√≥re"}
    ],
    question:"Jak√Ω elektromobil bych si mƒõl koupit, pokud chci dojezd 550 km, nab√≠jen√≠ nad 200 kWh, pravideln√© updaty SW vzduchem a m√°m cenov√Ω limit do 1,1 mil. Kƒç? Vyber top pƒõt nejlep≈°√≠ch model≈Ø.",
    answerIntro:"Na z√°kladƒõ va≈°ich po≈æadavk≈Ø doporuƒçuji tƒõchto pƒõt elektromobil≈Ø:",
    answers:[
      {detail:"dojezd 602 km, nab√≠jen√≠ 250 kW, OTA updaty, cena od 1 049 000 Kƒç. Nejlep≈°√≠ Supercharger s√≠≈•."},
      {detail:"dojezd 614 km, nab√≠jen√≠ 240 kW, OTA updaty, cena od 1 089 000 Kƒç. Aerodynamick√Ω sedan."},
      {detail:"dojezd 570 km, nab√≠jen√≠ 175 kW, OTA updaty, cena od 1 049 900 Kƒç. Prostorn√Ω interi√©r, sportovn√≠ design."},
      {detail:"dojezd 590 km, nab√≠jen√≠ 200 kW, OTA updaty, cena od 1 099 000 Kƒç. Pr√©miov√Ω interi√©r."},
      {detail:"dojezd 528 km, nab√≠jen√≠ 240 kW, OTA updaty, cena od 1 079 000 Kƒç. Architektura 800V."}
    ],
    step1title:"Krok 1: Z√°kazn√≠k se pt√° AI",
    step1hint:"U≈æivatel polo≈æ√≠ ot√°zku jednomu z AI asistent≈Ø. AI zaƒçne hledat relevantn√≠ informace na internetu.",
    step2title:"Krok 2: AI generuje odpovƒõƒè z natr√©novan√Ωch dat z tƒõchto zdroj≈Ø",
    step2hint:"AI generuje odpovƒõƒè na z√°kladƒõ natr√©novan√Ωch dat z tƒõchto a dal≈°√≠ch zdroj≈Ø.",
    step2loading:"Generov√°n√≠‚Ä¶",
    step3title:"Krok 3: AI vygeneruje odpovƒõƒè",
    step3hint:"AI slo≈æ√≠ odpovƒõƒè z informac√≠ nalezen√Ωch na internetu. Zm√≠nky znaƒçek jsou kl√≠ƒçov√©.",
    step4title:"Krok 4: Monitoring ‚Äì skenujeme zm√≠nky znaƒçek",
    step4loading:"Skenov√°n√≠‚Ä¶",
    step4hint:"N√°≈° syst√©m automaticky analyzuje odpovƒõdi AI a detekuje zm√≠nky na≈°√≠ znaƒçky i konkurence.",
    ourBrand:"Na≈°e znaƒçka",
    competitor:"Konkurence",
    step5title:"Krok 5: V√Ωpoƒçet AI Brand Visibility",
    factorPosition:"Pozice zm√≠nky",
    factorPositionHint:"≈†koda zm√≠nƒõna na 3. pozici v odpovƒõdi. ƒå√≠m d≈ô√≠ve v textu, t√≠m vy≈°≈°√≠ v√°ha.",
    factorSentiment:"Sentiment",
    factorSentimentHint:"Kontext je pozitivn√≠ ‚Äì prostorn√Ω interi√©r, doporuƒçena jako volba.",
    factorContext:"Kontext doporuƒçen√≠",
    factorContextHint:"Zm√≠nƒõna jako ƒç. 3 v top 5. Pozice uprost≈ôed ≈æeb≈ô√≠ƒçku m√° st≈ôedn√≠ v√°hu.",
    factorShare:"Pod√≠l zm√≠nek",
    factorShareHint:"≈†koda: 1 zm√≠nka z 5 celkem = 20% pod√≠l v odpovƒõdi.",
    formulaTitle:"V√ùPOƒåET V√Å≈ΩEN√âHO SK√ìRE",
    formulaWeights:["pozice 30%","sentiment 25%","kontext 25%","pod√≠l 20%"],
    scoreLabel:"AI Visibility Score",
    scoreSummaryTitle:"≈†koda ‚Äì 3. m√≠sto v top 5",
    scoreSummaryText:"≈†koda Enyaq Coup√© je na t≈ôet√≠ pozici ‚Äì AI ji doporuƒçuje, ale ne jako prvn√≠ volbu. Ni≈æ≈°√≠ pozice a pod√≠l 20% sni≈æuj√≠ celkov√© sk√≥re. Zde je prostor pro zlep≈°en√≠.",
    scoreFinalHint:"Visibility sk√≥re nen√≠ jen poƒçet zm√≠nek ‚Äì z√°le≈æ√≠ na pozici, sentimentu, kontextu doporuƒçen√≠ a pod√≠lu zm√≠nek. Tento proces prob√≠h√° tis√≠ckr√°t dennƒõ.",
    startBtn:"Spustit simulaci",
    startHint:"Proch√°zejte simulaci krok po kroku klik√°n√≠m",
    introLoading:"Naƒç√≠t√°n√≠ procesu‚Ä¶",
    whyBtn:"Proƒç je to d≈Øle≈æit√©?",
    restartBtn:"Spustit znovu",
    whyTitle:"Proƒç je AI Brand Visibility d≈Øle≈æit√©?",
    whyATitle:"Z√°kazn√≠ci se mƒõn√≠ ‚Äì a s nimi i cesta k n√°kupu",
    whyAText:"St√°le v√≠ce lid√≠ se p≈ôi v√Ωbƒõru produkt≈Ø pt√° AI m√≠sto Googlu. ChatGPT, Gemini, Perplexity a Copilot se st√°vaj√≠ nov√Ωm vstupn√≠m bodem z√°kaznick√© cesty. Pokud AI va≈°i znaƒçku doporuƒçuje, z√≠sk√°v√°te bezplatnou a vysoce d≈Øvƒõryhodnou reklamu.",
    whyBTitle:"Co se stane, kdy≈æ se tomu firma nevƒõnuje?",
    whyBItems:[
      ["Neviditelnost","AI va≈°i znaƒçku nezmi≈àuje a doporuƒçuje pouze konkurenci."],
      ["Ztr√°ta tr≈æn√≠ho pod√≠lu","Konkurence, kter√° aktivnƒõ optimalizuje svou AI viditelnost, p≈ôeb√≠r√° va≈°e potenci√°ln√≠ z√°kazn√≠ky."],
      ["Negativn√≠ framing","Bez aktivn√≠ spr√°vy m≈Ø≈æe AI va≈°i znaƒçku zmi≈àovat v negativn√≠m kontextu."],
      ["Nov√Ω SEO moment","Firmy, kter√© AI visibility ignoruj√≠ dnes, budou za 2‚Äì3 roky ve stejn√© situaci jako ty, kter√© p≈ôed 15 lety ignorovaly SEO."]
    ],
    whyConclusion:"AI Brand Visibility nen√≠ budoucnost ‚Äì je to souƒçasnost. Kdo ji ne≈ôe≈°√≠ teƒè, ztr√°c√≠ z√°kazn√≠ky ka≈æd√Ω den.",
    footer:"≈†KODA X ¬∑ AI Brand Visibility Monitor ¬∑ Interaktivn√≠ pr≈Øvodce",
    selectLang:"Vyberte jazyk"
  },
  en: {
    title:"Brand Visibility",
    subtitle:"How brand visibility monitoring works in AI-generated answers",
    steps:[
      {label:"Customer",sublabel:"asks AI",btnText:"Customer asks AI"},
      {label:"AI generates",sublabel:"from trained data",btnText:"AI generates from trained data"},
      {label:"AI answer",sublabel:"generated text",btnText:"AI generates answer"},
      {label:"Monitoring",sublabel:"brands in answer",btnText:"Scanning mentions"},
      {label:"Visibility",sublabel:"brand score",btnText:"Calculating score"}
    ],
    question:"Which electric car should I buy if I want a range of 550 km, charging over 200 kW, regular OTA software updates, and a price limit of 44,000 EUR? Pick the top five models.",
    answerIntro:"Based on your requirements, I recommend these five electric vehicles:",
    answers:[
      {detail:"range 602 km, charging 250 kW, OTA updates, from 42,000 EUR. Best Supercharger network."},
      {detail:"range 614 km, charging 240 kW, OTA updates, from 43,500 EUR. Aerodynamic sedan."},
      {detail:"range 570 km, charging 175 kW, OTA updates, from 42,000 EUR. Spacious interior, sporty design."},
      {detail:"range 590 km, charging 200 kW, OTA updates, from 44,000 EUR. Premium interior."},
      {detail:"range 528 km, charging 240 kW, OTA updates, from 43,000 EUR. 800V architecture."}
    ],
    step1title:"Step 1: Customer asks AI",
    step1hint:"The user asks a question to an AI assistant. AI starts searching for relevant information.",
    step2title:"Step 2: AI generates answer from trained data",
    step2hint:"AI generates an answer based on trained data from these and other sources.",
    step2loading:"Generating...",
    step3title:"Step 3: AI generates an answer",
    step3hint:"AI composes an answer from information found on the internet. Brand mentions are key.",
    step4title:"Step 4: Monitoring - scanning brand mentions",
    step4loading:"Scanning...",
    step4hint:"Our system automatically analyzes AI responses and detects mentions of our brand and competitors.",
    ourBrand:"Our brand",
    competitor:"Competitor",
    step5title:"Step 5: AI Brand Visibility Calculation",
    factorPosition:"Mention position",
    factorPositionHint:"≈†koda mentioned at 3rd position in the answer. The earlier in text, the higher the weight.",
    factorSentiment:"Sentiment",
    factorSentimentHint:"Context is positive - spacious interior, recommended as a top choice.",
    factorContext:"Recommendation context",
    factorContextHint:"Mentioned as #3 in top 5. Mid-ranking position has medium weight.",
    factorShare:"Mention share",
    factorShareHint:"≈†koda: 1 mention out of 5 total = 20% share in the answer.",
    formulaTitle:"WEIGHTED SCORE CALCULATION",
    formulaWeights:["position 30%","sentiment 25%","context 25%","share 20%"],
    scoreLabel:"AI Visibility Score",
    scoreSummaryTitle:"≈†koda ‚Äì 3rd place in top 5",
    scoreSummaryText:"≈†koda Enyaq Coup√© is in third position - AI recommends it, but not as the first choice. Lower position and 20% share reduce the overall score. There is room for improvement.",
    scoreFinalHint:"Visibility score is not just about the number of mentions - it depends on position, sentiment, recommendation context and share of mentions.",
    startBtn:"Start simulation",
    startHint:"Navigate the simulation step by step by clicking",
    introLoading:"Loading process...",
    whyBtn:"Why does this matter?",
    restartBtn:"Run again",
    whyTitle:"Why is AI Brand Visibility important?",
    whyATitle:"Customers are changing - and so is the path to purchase",
    whyAText:"More and more people are asking AI instead of Google when choosing products. ChatGPT, Gemini, Perplexity and Copilot are becoming the new entry point of the customer journey. If AI recommends your brand, you get free and highly trusted advertising.",
    whyBTitle:"What happens when a company ignores this?",
    whyBItems:[
      ["Invisibility","AI does not mention your brand and only recommends competitors."],
      ["Market share loss","Competitors actively optimizing their AI visibility are taking your potential customers."],
      ["Negative framing","Without active management, AI may mention your brand in a negative context."],
      ["The new SEO moment","Companies ignoring AI visibility today will be in the same situation in 2-3 years as those who ignored SEO 15 years ago."]
    ],
    whyConclusion:"AI Brand Visibility is not the future - it is the present. Those who do not address it now are losing customers every day.",
    footer:"≈†KODA X ¬∑ AI Brand Visibility Monitor ¬∑ Interactive Guide",
    selectLang:"Select language"
  },
  de: {
    title:"Brand Visibility",
    subtitle:"Wie das Monitoring der Markensichtbarkeit in AI-Antworten funktioniert",
    steps:[
      {label:"Kunde",sublabel:"fragt AI",btnText:"Kunde fragt die AI"},
      {label:"AI generiert",sublabel:"aus Trainingsdaten",btnText:"AI generiert aus Trainingsdaten"},
      {label:"AI-Antwort",sublabel:"generierter Text",btnText:"AI generiert Antwort"},
      {label:"Monitoring",sublabel:"Marken in Antwort",btnText:"Erw√§hnungen scannen"},
      {label:"Sichtbarkeit",sublabel:"Marken-Score",btnText:"Score berechnen"}
    ],
    question:"Welches Elektroauto sollte ich kaufen, wenn ich eine Reichweite von 550 km, Laden √ºber 200 kW, regelm√§√üige OTA-Software-Updates und ein Preislimit von 44.000 EUR haben m√∂chte? W√§hle die besten f√ºnf Modelle.",
    answerIntro:"Basierend auf Ihren Anforderungen empfehle ich diese f√ºnf Elektrofahrzeuge:",
    answers:[
      {detail:"Reichweite 602 km, Laden 250 kW, OTA-Updates, ab 42.000 EUR. Bestes Supercharger-Netzwerk."},
      {detail:"Reichweite 614 km, Laden 240 kW, OTA-Updates, ab 43.500 EUR. Aerodynamische Limousine."},
      {detail:"Reichweite 570 km, Laden 175 kW, OTA-Updates, ab 42.000 EUR. Ger√§umiger Innenraum, sportliches Design."},
      {detail:"Reichweite 590 km, Laden 200 kW, OTA-Updates, ab 44.000 EUR. Premium-Interieur."},
      {detail:"Reichweite 528 km, Laden 240 kW, OTA-Updates, ab 43.000 EUR. 800V-Architektur."}
    ],
    step1title:"Schritt 1: Kunde fragt die AI",
    step1hint:"Der Nutzer stellt einem AI-Assistenten eine Frage. Die AI beginnt, relevante Informationen zu suchen.",
    step2title:"Schritt 2: AI generiert Antwort aus Trainingsdaten",
    step2hint:"AI generiert eine Antwort auf Basis trainierter Daten aus diesen und weiteren Quellen.",
    step2loading:"Generierung‚Ä¶",
    step3title:"Schritt 3: AI generiert die Antwort",
    step3hint:"AI erstellt eine Antwort aus im Internet gefundenen Informationen. Markenerw√§hnungen sind entscheidend.",
    step4title:"Schritt 4: Monitoring ‚Äì Markenerw√§hnungen scannen",
    step4loading:"Scannen‚Ä¶",
    step4hint:"Unser System analysiert automatisch AI-Antworten und erkennt Erw√§hnungen unserer Marke und der Konkurrenz.",
    ourBrand:"Unsere Marke",
    competitor:"Wettbewerber",
    step5title:"Schritt 5: AI Brand Visibility Berechnung",
    factorPosition:"Position der Erw√§hnung",
    factorPositionHint:"≈†koda auf 3. Position in der Antwort erw√§hnt. Je fr√ºher im Text, desto h√∂her die Gewichtung.",
    factorSentiment:"Sentiment",
    factorSentimentHint:"Kontext ist positiv ‚Äì ger√§umiger Innenraum, als Top-Wahl empfohlen.",
    factorContext:"Empfehlungskontext",
    factorContextHint:"Erw√§hnt als Nr. 3 in Top 5. Mittlere Position hat mittlere Gewichtung.",
    factorShare:"Erw√§hnungsanteil",
    factorShareHint:"≈†koda: 1 Erw√§hnung von 5 insgesamt = 20% Anteil in der Antwort.",
    formulaTitle:"GEWICHTETE SCORE-BERECHNUNG",
    formulaWeights:["Position 30%","Sentiment 25%","Kontext 25%","Anteil 20%"],
    scoreLabel:"AI Visibility Score",
    scoreSummaryTitle:"≈†koda ‚Äì Platz 3 in Top 5",
    scoreSummaryText:"≈†koda Enyaq Coup√© auf dem dritten Platz ‚Äì die AI empfiehlt ihn, aber nicht als erste Wahl. Niedrigere Position und 20% Anteil senken den Gesamtscore. Hier besteht Verbesserungspotenzial.",
    scoreFinalHint:"Der Visibility-Score basiert nicht nur auf der Anzahl der Erw√§hnungen ‚Äì es kommt auf Position, Sentiment, Empfehlungskontext und Anteil an.",
    startBtn:"Simulation starten",
    startHint:"Navigieren Sie Schritt f√ºr Schritt durch die Simulation",
    introLoading:"Prozess wird geladen‚Ä¶",
    whyBtn:"Warum ist das wichtig?",
    restartBtn:"Nochmals starten",
    whyTitle:"Warum ist AI Brand Visibility wichtig?",
    whyATitle:"Kunden ver√§ndern sich ‚Äì und damit der Weg zum Kauf",
    whyAText:"Immer mehr Menschen fragen bei der Produktauswahl AI statt Google. ChatGPT, Gemini, Perplexity und Copilot werden zum neuen Einstiegspunkt der Customer Journey. Wenn AI Ihre Marke empfiehlt, erhalten Sie kostenlose und hochvertrauensw√ºrdige Werbung.",
    whyBTitle:"Was passiert, wenn ein Unternehmen das ignoriert?",
    whyBItems:[
      ["Unsichtbarkeit","AI erw√§hnt Ihre Marke nicht und empfiehlt nur Wettbewerber."],
      ["Marktanteilsverlust","Wettbewerber, die aktiv ihre AI-Sichtbarkeit optimieren, √ºbernehmen Ihre potenziellen Kunden."],
      ["Negatives Framing","Ohne aktives Management kann AI Ihre Marke in negativem Kontext erw√§hnen."],
      ["Der neue SEO-Moment","Unternehmen, die AI Visibility heute ignorieren, werden in 2‚Äì3 Jahren in der gleichen Situation sein."]
    ],
    whyConclusion:"AI Brand Visibility ist nicht die Zukunft ‚Äì es ist die Gegenwart. Wer es jetzt nicht angeht, verliert t√§glich Kunden.",
    footer:"≈†KODA X ¬∑ AI Brand Visibility Monitor ¬∑ Interaktiver Leitfaden",
    selectLang:"Sprache w√§hlen"
  }
};

var STEP_ICONS = ["üë§","üîç","üí¨","üì°","üìä"];
var STEP_COLORS = ["#4CAF50","#2196F3","#9C27B0","#F44336","#4ade80"];
var FACTOR_ICONS = ["üìç","üíö","‚≠ê","üìä"];
var PULSE_ANIMS = ["pulse","pulseBlue","pulsePurple","pulseRed","pulseGreen"];

var BRAND_NAMES = [
  "Tesla Model 3 Long Range",
  "Hyundai Ioniq 6 Long Range",
  "≈†koda Enyaq Coup√© 85",
  "BMW iX xDrive40",
  "Kia EV6 Long Range"
];
var BRAND_TYPES = ["competitor","competitor","skoda","competitor","competitor"];

var BRANDS_FOUND = [
  {name:"≈†koda Enyaq Coup√© 85",type:"skoda"},
  {name:"Tesla Model 3 LR",type:"competitor"},
  {name:"Hyundai Ioniq 6 LR",type:"competitor"},
  {name:"BMW iX xDrive40",type:"competitor"},
  {name:"Kia EV6 LR",type:"competitor"}
];

var SOURCES = [
  {name:"Skoda-auto.cz",icon:"üü¢"},{name:"Wikipedia",icon:"üìñ"},
  {name:"YouTube",icon:"‚ñ∂Ô∏è"},{name:"Facebook",icon:"üìò"},
  {name:"Instagram",icon:"üì∑"},{name:"TikTok",icon:"üéµ"},
  {name:"Auto.cz",icon:"üèéÔ∏è"},{name:"Novinky.cz",icon:"üì∞"},
  {name:"Reddit",icon:"üí¨"},{name:"X / Twitter",icon:"üê¶"},
  {name:"F√≥ra",icon:"üó£Ô∏è"},{name:"Blogy",icon:"‚úçÔ∏è"}
];

var BG = "linear-gradient(145deg, #0a0f1a 0%, #0d1829 40%, #0a1520 100%)";
var GRID_BG = "linear-gradient(rgba(74,222,128,0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(74,222,128,0.03) 1px, transparent 1px)";
var CARD_BG = "linear-gradient(135deg, #111d2e, #152238)";
var GREEN = "#4ade80";
var RED = "#ef5350";
var FONT = "'DM Sans', 'Segoe UI', sans-serif";
var MONO = "'JetBrains Mono', monospace";

function scoreColor(val) {
  if (val >= 80) return "#4ade80";
  if (val >= 60) return "#facc15";
  if (val >= 40) return "#fb923c";
  return "#ef4444";
}
function scoreGlowAnim(val) {
  if (val >= 80) return "scoreGlowGreen 2s infinite";
  if (val >= 60) return "scoreGlowYellow 2s infinite";
  if (val >= 40) return "scoreGlowOrange 2s infinite";
  return "scoreGlowRed 2s infinite";
}
function scoreGradient(val) {
  var c = scoreColor(val);
  if (val >= 80) return ["#4ade80","#22c55e"];
  if (val >= 60) return ["#facc15","#eab308"];
  if (val >= 40) return ["#fb923c","#f97316"];
  return ["#ef4444","#dc2626"];
}

function TypingText(props) {
  var text = props.text;
  var active = props.active;
  var speed = props.speed || 35;
  var onDone = props.onDone;
  var ref = useRef(0);
  var s = useState("");
  var displayed = s[0];
  var setDisplayed = s[1];

  useEffect(function(){
    if(!active){setDisplayed("");ref.current=0;return;}
    ref.current=0;setDisplayed("");
    var iv=setInterval(function(){
      ref.current++;
      if(ref.current<=text.length){setDisplayed(text.slice(0,ref.current));}
      else{clearInterval(iv);if(onDone)onDone();}
    },speed);
    return function(){clearInterval(iv);};
  },[active,text]);

  return React.createElement("span",null,
    displayed,
    active && displayed.length < text.length ? React.createElement("span",{style:{animation:"blink 0.6s infinite",color:"#4CAF50"}},"|") : null
  );
}

function App() {
  var sp = useState("logo");
  var splashPhase = sp[0]; var setSplashPhase = sp[1];
  var lg = useState(null);
  var lang = lg[0]; var setLang = lg[1];
  var mb = useState(false);
  var isMobile = mb[0]; var setIsMobile = mb[1];

  useEffect(function(){
    var c=function(){setIsMobile(window.innerWidth<640);};
    c();window.addEventListener("resize",c);
    return function(){window.removeEventListener("resize",c);};
  },[]);

  useEffect(function(){
    if(splashPhase==="logo"){
      var tm=setTimeout(function(){setSplashPhase("lang");},2200);
      return function(){clearTimeout(tm);};
    }
  },[splashPhase]);

  var ph = useState("idle");
  var phase = ph[0]; var setPhase = ph[1];
  var il = useState(-1);
  var introLit = il[0]; var setIntroLit = il[1];
  var cs = useState(-1);
  var currentStep = cs[0]; var setCurrentStep = cs[1];
  var sa = useState(false);
  var stepAnimating = sa[0]; var setStepAnimating = sa[1];
  var sr = useState(0);
  var sourcesRevealed = sr[0]; var setSourcesRevealed = sr[1];
  var ar = useState(0);
  var answerRevealed = ar[0]; var setAnswerRevealed = ar[1];
  var bs = useState(0);
  var brandsScanned = bs[0]; var setBrandsScanned = bs[1];
  var vs = useState(0);
  var visibilityScore = vs[0]; var setVisibilityScore = vs[1];
  var fr = useState(0);
  var factorsRevealed = fr[0]; var setFactorsRevealed = fr[1];
  var fb = useState(false);
  var factorBarsAnimated = fb[0]; var setFactorBarsAnimated = fb[1];
  var fs2 = useState(false);
  var finalScorePhase = fs2[0]; var setFinalScorePhase = fs2[1];
  var wi = useState(false);
  var showWhyImportant = wi[0]; var setShowWhyImportant = wi[1];
  var bv = useState(false);
  var buttonVisible = bv[0]; var setButtonVisible = bv[1];
  var scp = useState(false);
  var scanPulse = scp[0]; var setScanPulse = scp[1];
  var timersRef = useRef([]);
  var bottomRef = useRef(null);

  var t = lang ? T[lang] : T.cs;

  function clearTimers(){timersRef.current.forEach(clearTimeout);timersRef.current=[];}
  function addTimer(fn,ms){var id=setTimeout(fn,ms);timersRef.current.push(id);return id;}
  function scrollToBottom(){setTimeout(function(){if(bottomRef.current)bottomRef.current.scrollIntoView({behavior:"smooth",block:"end"});},150);}

  function reset(){
    clearTimers();setPhase("idle");setIntroLit(-1);setCurrentStep(-1);setStepAnimating(false);
    setSourcesRevealed(0);setAnswerRevealed(0);setBrandsScanned(0);setVisibilityScore(0);
    setFactorsRevealed(0);setFactorBarsAnimated(false);setFinalScorePhase(false);
    setShowWhyImportant(false);setButtonVisible(false);setScanPulse(false);
  }

  function startIntro(){
    setPhase("intro");setIntroLit(-1);setButtonVisible(false);
    for(var i=0;i<5;i++)(function(j){addTimer(function(){setIntroLit(j);},600+j*2400);})(i);
    addTimer(function(){setPhase("ready");},600+5*2400+1000);
  }

  useEffect(function(){
    if(stepAnimating||phase==="intro"){setButtonVisible(false);return;}
    var tm=setTimeout(function(){setButtonVisible(true);scrollToBottom();},600);
    return function(){clearTimeout(tm);};
  },[stepAnimating,phase,currentStep]);

  var advanceStep = useCallback(function(){
    var ns=currentStep+1;
    if(ns>=5||stepAnimating)return;
    if(phase==="ready")setPhase("steps");
    setCurrentStep(ns);setStepAnimating(true);setButtonVisible(false);scrollToBottom();
    if(ns===0)addTimer(function(){setStepAnimating(false);},4500);
    else if(ns===1){SOURCES.forEach(function(_,i){addTimer(function(){setSourcesRevealed(i+1);},200+i*200);});addTimer(function(){setStepAnimating(false);},200+SOURCES.length*200+400);}
    else if(ns===2){for(var i=0;i<6;i++)(function(j){addTimer(function(){setAnswerRevealed(j+1);},200+j*800);})(i);addTimer(function(){setStepAnimating(false);},200+6*800+400);}
    else if(ns===3){setScanPulse(true);BRANDS_FOUND.forEach(function(_,i){addTimer(function(){setBrandsScanned(i+1);},2500+i*700);});addTimer(function(){setScanPulse(false);setStepAnimating(false);},2500+BRANDS_FOUND.length*700+600);}
    else if(ns===4){
      for(var i=0;i<4;i++)(function(j){addTimer(function(){setFactorsRevealed(j+1);},300+j*700);})(i);
      addTimer(function(){setFactorBarsAnimated(true);},300+4*700+400);
      addTimer(function(){setFinalScorePhase(true);},300+4*700+1200);
      for(var i=0;i<=52;i++)(function(j){addTimer(function(){setVisibilityScore(j);},300+4*700+1500+j*30);})(i);
      addTimer(function(){setStepAnimating(false);},300+4*700+1500+52*30+400);
    }
  },[currentStep,stepAnimating,phase]);

  function stepActive(i){return currentStep>=i;}
  function stepCurrent(i){return currentStep===i;}
  var nsi = currentStep+1;
  var canAdvance = buttonVisible && !stepAnimating && nsi<5 && (phase==="ready"||phase==="steps");
  var isFinished = buttonVisible && currentStep>=4 && !stepAnimating;
  function progressLit(i){return phase==="intro" ? i<=introLit : (phase==="ready"||phase==="steps");}
  function progressPulsing(i){return phase==="intro" ? i===introLit : (phase==="steps"&&stepCurrent(i)&&stepAnimating);}

  function cardS(i){return {background:CARD_BG,border:stepCurrent(i)&&stepAnimating?"1px solid "+STEP_COLORS[i]+"66":"1px solid #1e3045",borderRadius:isMobile?12:16,padding:isMobile?16:24,animation:"fadeInUp 0.5s ease",transition:"border 0.5s"};}
  var hintS = {marginTop:isMobile?10:14,fontSize:isMobile?12:13,color:"#5a7a8a",lineHeight:1.5,padding:"0 4px"};

  // ===== SPLASH + LANG SELECT =====
  if(!lang){
    return (
      <div style={{minHeight:"100vh",background:BG,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontFamily:FONT,position:"relative",overflow:"hidden"}}>
        <div style={{position:"fixed",inset:0,backgroundImage:GRID_BG,backgroundSize:"60px 60px",pointerEvents:"none"}} />
        <div style={{textAlign:"center",position:"relative",zIndex:1}}>
          <div style={{display:"inline-flex",alignItems:"center",gap:isMobile?12:16,marginBottom:splashPhase==="lang"?12:0,transition:"margin 0.6s ease"}}>
            <div style={{width:isMobile?48:64,height:isMobile?48:64,borderRadius:isMobile?12:16,background:"linear-gradient(135deg, #4ade80, #22c55e)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:isMobile?24:32,fontWeight:700,color:"#0a1520",animation:"logoAppear 0.8s ease-out, logoGlow 3s ease-in-out infinite"}}>AI</div>
            <h1 style={{fontSize:isMobile?26:40,fontWeight:700,margin:0,background:"linear-gradient(135deg, #4ade80, #a7f3d0)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",letterSpacing:"-0.5px",animation:"textSlideIn 0.8s ease-out 0.3s both"}}>Brand Visibility</h1>
          </div>
          {splashPhase==="lang" && (
            <div style={{animation:"langFadeUp 0.7s ease-out"}}>
              <p style={{fontSize:isMobile?14:16,color:"#7b8fa3",margin:"0 0 32px",maxWidth:500,marginLeft:"auto",marginRight:"auto"}}>
                {T.cs.selectLang} / {T.en.selectLang} / {T.de.selectLang}
              </p>
              <div style={{display:"flex",gap:isMobile?12:16,justifyContent:"center",flexWrap:"wrap"}}>
                {[{code:"cs",flag:"üá®üáø",label:"ƒåe≈°tina"},{code:"en",flag:"üá¨üáß",label:"English"},{code:"de",flag:"üá©üá™",label:"Deutsch"}].map(function(l,idx){
                  return (
                    <button key={l.code} onClick={function(){setSplashPhase("done");setLang(l.code);}} style={{background:CARD_BG,border:"2px solid #4ade8044",borderRadius:16,padding:isMobile?"20px 28px":"24px 36px",cursor:"pointer",fontFamily:"inherit",transition:"all 0.3s",display:"flex",flexDirection:"column",alignItems:"center",gap:10,minWidth:isMobile?100:140,animation:"langFadeUp 0.5s ease-out "+(0.1+idx*0.12)+"s both"}}
                      onMouseOver={function(e){e.currentTarget.style.borderColor="#4ade80";e.currentTarget.style.transform="scale(1.05)";e.currentTarget.style.boxShadow="0 4px 24px rgba(74,222,128,0.2)";}}
                      onMouseOut={function(e){e.currentTarget.style.borderColor="#4ade8044";e.currentTarget.style.transform="scale(1)";e.currentTarget.style.boxShadow="none";}}>
                      <span style={{fontSize:isMobile?32:40}}>{l.flag}</span>
                      <span style={{fontSize:isMobile?14:16,fontWeight:600,color:"#e0e8f0"}}>{l.label}</span>
                    </button>
                  );
                })}
              </div>
            </div>
          )}
        </div>
        <div style={{position:"absolute",bottom:24,fontSize:11,color:"#3a4a5a"}}>≈†KODA X ¬∑ AI Brand Visibility Monitor</div>
      </div>
    );
  }

  // ===== MAIN APP =====
  return (
    <div style={{minHeight:"100vh",background:BG,color:"#e0e8f0",fontFamily:FONT,padding:isMobile?"16px 12px":"24px",position:"relative",overflow:"hidden"}}>
      <div style={{position:"fixed",inset:0,backgroundImage:GRID_BG,backgroundSize:"60px 60px",pointerEvents:"none"}} />

      <button onClick={function(){reset();setSplashPhase("logo");setLang(null);}} style={{position:"absolute",top:isMobile?12:20,right:isMobile?12:20,background:"#111d2e",border:"1px solid #2a3a4a",borderRadius:8,padding:"6px 12px",color:"#7b8fa3",fontSize:12,cursor:"pointer",fontFamily:"inherit",zIndex:10}}
        onMouseOver={function(e){e.target.style.borderColor="#4ade80";e.target.style.color="#4ade80";}}
        onMouseOut={function(e){e.target.style.borderColor="#2a3a4a";e.target.style.color="#7b8fa3";}}>
        {lang==="cs"?"üá®üáø":lang==="en"?"üá¨üáß":"üá©üá™"} {lang.toUpperCase()}
      </button>

      <div style={{textAlign:"center",marginBottom:isMobile?20:28,position:"relative",zIndex:1}}>
        <div style={{display:"inline-flex",alignItems:"center",gap:isMobile?8:12,marginBottom:10}}>
          <div style={{width:isMobile?32:40,height:isMobile?32:40,borderRadius:10,background:"linear-gradient(135deg, #4ade80, #22c55e)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:isMobile?16:20,fontWeight:700,color:"#0a1520"}}>AI</div>
          <h1 style={{fontSize:isMobile?20:28,fontWeight:700,margin:0,background:"linear-gradient(135deg, #4ade80, #a7f3d0)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",letterSpacing:"-0.5px"}}>{t.title}</h1>
        </div>
        <p style={{fontSize:isMobile?13:15,color:"#7b8fa3",margin:0,maxWidth:600,marginLeft:"auto",marginRight:"auto"}}>{t.subtitle}</p>
      </div>

      {/* Progress bar */}
      <div style={{maxWidth:900,margin:isMobile?"0 auto 16px":"0 auto 24px",position:"relative",zIndex:1}}>
        <div style={{display:"flex",alignItems:"center"}}>
          {[0,1,2,3,4].map(function(i){
            var lit=progressLit(i);var pulsing=progressPulsing(i);var iconSz=isMobile?48:96;
            return (
              <div key={i} style={{display:"flex",alignItems:"center",flex:1}}>
                <div style={{display:"flex",flexDirection:"column",alignItems:"center",flex:"0 0 auto"}}>
                  <div style={{width:iconSz,height:iconSz,borderRadius:"50%",background:lit?"linear-gradient(135deg, "+STEP_COLORS[i]+", "+STEP_COLORS[i]+"88)":"#1a2535",border:(isMobile?2:3)+"px solid "+(lit?STEP_COLORS[i]:"#2a3a4a"),display:"flex",alignItems:"center",justifyContent:"center",fontSize:isMobile?22:44,transition:"all 0.5s ease",animation:pulsing?PULSE_ANIMS[i]+" 1.5s infinite":(lit&&phase==="intro"&&i===introLit)?"iconPopIn 0.4s ease-out":"none",position:"relative",zIndex:2}}>{STEP_ICONS[i]}</div>
                  <span style={{fontSize:isMobile?10:14,fontWeight:600,marginTop:isMobile?4:8,color:lit?STEP_COLORS[i]:"#4a5a6a",transition:"color 0.5s",textAlign:"center",whiteSpace:"nowrap"}}>{t.steps[i].label}</span>
                  <span style={{fontSize:isMobile?8:12,textAlign:"center",color:lit?"#7b8fa3":"#3a4a5a",transition:"color 0.5s"}}>{t.steps[i].sublabel}</span>
                </div>
                {i<4 && <div style={{flex:1,height:isMobile?2:3,background:"#1a2535",marginLeft:isMobile?4:10,marginRight:isMobile?4:10,marginBottom:isMobile?24:36,borderRadius:1,position:"relative",overflow:"hidden"}}>
                  <div style={{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(90deg, "+STEP_COLORS[i]+", "+STEP_COLORS[i+1]+")",transform:progressLit(i+1)?"scaleX(1)":"scaleX(0)",transformOrigin:"left",transition:"transform 0.6s ease"}} />
                  {pulsing && <div style={{position:"absolute",width:20,height:"100%",background:"linear-gradient(90deg, transparent, "+STEP_COLORS[i]+", transparent)",animation:"flowRight 1.5s infinite"}} />}
                </div>}
              </div>);
          })}
        </div>
      </div>

      {/* Main content */}
      <div style={{maxWidth:900,margin:"0 auto",position:"relative",zIndex:1}}>
        <div style={{display:"flex",flexDirection:"column",gap:16}}>

          {/* STEP 0 */}
          {stepActive(0) && <div style={cardS(0)}>
            <div style={{display:"flex",alignItems:isMobile?"flex-start":"center",gap:10,marginBottom:16,flexWrap:"wrap"}}>
              <span style={{fontSize:isMobile?20:24}}>üë§</span>
              <span style={{fontWeight:600,fontSize:isMobile?14:16,color:"#4CAF50"}}>{t.step1title}</span>
              <span style={{marginLeft:isMobile?0:"auto",fontSize:11,color:"#5a7a8a",background:"#0d1520",padding:"4px 10px",borderRadius:8}}>ChatGPT / Gemini / Perplexity / Copilot</span>
            </div>
            <div style={{background:"#0d1520",borderRadius:12,padding:isMobile?14:20,display:"flex",alignItems:"flex-start",gap:14}}>
              <div style={{width:42,height:42,borderRadius:"50%",background:"linear-gradient(135deg, #4CAF50, #2E7D32)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,fontSize:18}}>üë§</div>
              <div style={{paddingTop:8}}>
                <div style={{fontSize:isMobile?14:17,color:"#d0e0f0",fontFamily:MONO}}>
                  <TypingText text={t.question} active={stepActive(0)} speed={35} />
                </div>
              </div>
            </div>
            <div style={hintS}>{t.step1hint}</div>
          </div>}

          {/* STEP 1 */}
          {stepActive(1) && <div style={cardS(1)}>
            <div style={{display:"flex",alignItems:"center",gap:10,marginBottom:16,flexWrap:"wrap"}}>
              <span style={{fontSize:isMobile?20:24}}>üîç</span>
              <span style={{fontWeight:600,fontSize:isMobile?13:16,color:"#2196F3"}}>{t.step2title}</span>
              {stepAnimating&&stepCurrent(1)&&<span style={{marginLeft:"auto",fontSize:12,color:"#2196F3"}}><span style={{animation:"dotPulse 0.8s infinite"}}>‚óè</span> {t.step2loading}</span>}
            </div>
            <div style={{display:"grid",gridTemplateColumns:isMobile?"repeat(auto-fill, minmax(110px, 1fr))":"repeat(auto-fill, minmax(130px, 1fr))",gap:isMobile?8:10}}>
              {SOURCES.map(function(s,i){var r=i<sourcesRevealed;return (
                <div key={s.name} style={{background:r?"#1a2d42":"#0d1520",border:"1px solid "+(r?"#2196F344":"#1a2535"),borderRadius:10,padding:"10px 12px",display:"flex",alignItems:"center",gap:8,opacity:r?1:0.25,transform:r?"scale(1)":"scale(0.95)",transition:"all 0.4s ease"}}>
                  <span style={{fontSize:18}}>{s.icon}</span>
                  <span style={{fontSize:12,fontWeight:500,color:r?"#b0c8e0":"#3a4a5a"}}>{s.name}</span>
                  {r&&<span style={{marginLeft:"auto",width:6,height:6,borderRadius:"50%",background:"#4CAF50",animation:"fadeIn 0.3s"}} />}
                </div>);})}
            </div>
            <div style={hintS}>{t.step2hint}</div>
          </div>}

          {/* STEP 2 - Answer */}
          {stepActive(2) && <div style={{...cardS(2),position:"relative",overflow:"hidden"}}>
            {scanPulse && <div style={{position:"absolute",left:0,width:"100%",height:2,background:"linear-gradient(90deg, transparent, #F44336, transparent)",animation:"scanLine 2s infinite linear",zIndex:5}} />}
            <div style={{display:"flex",alignItems:"center",gap:10,marginBottom:16}}>
              <span style={{fontSize:isMobile?20:24}}>üí¨</span>
              <span style={{fontWeight:600,fontSize:isMobile?14:16,color:"#9C27B0"}}>{t.step3title}</span>
            </div>
            <div style={{background:"#0d1520",borderRadius:12,padding:isMobile?14:20,fontSize:isMobile?13:15,lineHeight:1.7,color:"#b0c8e0",minHeight:60}}>
              {answerRevealed>=1 && <div style={{marginBottom:16,animation:"fadeIn 0.3s"}}>{t.answerIntro}</div>}
              {BRAND_NAMES.map(function(name,i){
                if(i+2>answerRevealed)return null;
                var isS=BRAND_TYPES[i]==="skoda";
                return (
                  <div key={i} style={{display:"flex",gap:isMobile?8:12,alignItems:"flex-start",padding:isMobile?"8px 10px":"10px 14px",marginBottom:8,background:isS?"rgba(74,222,128,0.05)":"rgba(255,255,255,0.02)",borderRadius:10,borderLeft:"3px solid "+(isS?GREEN:RED),animation:"fadeInUp 0.4s ease",transition:"all 0.5s"}}>
                    <span style={{fontWeight:700,fontSize:isMobile?15:18,color:"#5a7a8a",minWidth:isMobile?20:24,textAlign:"center",flexShrink:0,paddingTop:1}}>{i+1}</span>
                    <div>
                      <span style={{fontWeight:700,fontSize:isMobile?13:16,color:isS?GREEN:RED,padding:"2px 8px",borderRadius:4,background:isS?"rgba(74,222,128,0.1)":"rgba(244,67,54,0.08)",border:"1px solid transparent",transition:"all 0.5s"}}>{name}</span>
                      <span style={{color:"#8899aa",marginLeft:6,fontSize:isMobile?12:15}}> - {t.answers[i].detail}</span>
                    </div>
                  </div>);
              })}
            </div>
            <div style={hintS}>{t.step3hint}</div>
          </div>}

          {/* STEP 3 - Monitoring */}
          {stepActive(3) && <div style={cardS(3)}>
            <div style={{display:"flex",alignItems:"center",gap:10,marginBottom:16,flexWrap:"wrap"}}>
              <span style={{fontSize:isMobile?20:24}}>üì°</span>
              <span style={{fontWeight:600,fontSize:isMobile?14:16,color:"#F44336"}}>{t.step4title}</span>
              {stepAnimating&&stepCurrent(3)&&<span style={{marginLeft:"auto",fontSize:12,color:"#F44336"}}><span style={{animation:"dotPulse 0.8s infinite"}}>‚óè</span> {t.step4loading}</span>}
            </div>
            <div style={{display:"flex",flexDirection:"column",gap:10}}>
              {BRANDS_FOUND.map(function(b,i){var r=i<brandsScanned;var isS=b.type==="skoda";return (
                <div key={b.name} style={{background:r?(isS?"#0f2a1a":"#2a1515"):"#0d1520",border:"1px solid "+(r?(isS?"#4ade8044":"#ef535044"):"#1a2535"),borderRadius:10,padding:"12px 16px",display:"flex",alignItems:"center",gap:10,opacity:r?1:0.2,transform:r?"translateX(0)":"translateX(-10px)",transition:"all 0.5s ease"}}>
                  <div style={{width:10,height:10,borderRadius:"50%",background:isS?GREEN:RED,boxShadow:r?"0 0 8px "+(isS?GREEN:RED):"none"}} />
                  <div>
                    <div style={{fontWeight:600,fontSize:14,color:isS?GREEN:RED}}>{b.name}</div>
                    <div style={{fontSize:11,color:"#5a7a8a"}}>{isS?t.ourBrand:t.competitor}</div>
                  </div>
                  {r&&<span style={{marginLeft:"auto",fontSize:11,background:isS?"#4ade8022":"#ef535022",color:isS?GREEN:RED,padding:"2px 8px",borderRadius:6,fontWeight:600,fontFamily:MONO}}>1x</span>}
                </div>);})}
            </div>
            <div style={hintS}>{t.step4hint}</div>
          </div>}

          {/* STEP 4 - Score */}
          {stepActive(4) && <div style={{background:"linear-gradient(135deg, #0f2a1a, #152238)",border:"1px solid "+scoreColor(52)+"44",borderRadius:isMobile?12:16,padding:isMobile?18:28,animation:"fadeInUp 0.5s ease"}}>
            <div style={{display:"flex",alignItems:"center",justifyContent:"center",gap:10,marginBottom:24}}>
              <span style={{fontSize:isMobile?20:24}}>üìä</span>
              <span style={{fontWeight:600,fontSize:isMobile?14:16,color:GREEN}}>{t.step5title}</span>
            </div>
            <div style={{display:"grid",gridTemplateColumns:isMobile?"1fr":"1fr 1fr",gap:isMobile?10:14,marginBottom:isMobile?16:24}}>
              {[
                {icon:"üìç",label:t.factorPosition,score:60,hint:t.factorPositionHint},
                {icon:"üíö",label:t.factorSentiment,score:75,hint:t.factorSentimentHint},
                {icon:"‚≠ê",label:t.factorContext,score:45,hint:t.factorContextHint},
                {icon:"üìä",label:t.factorShare,score:20,hint:t.factorShareHint}
              ].map(function(f,i){
                return (
                  <div key={i} style={{background:"#0d1520",borderRadius:12,padding:16,border:factorsRevealed>=i+1?"1px solid #4ade8033":"1px solid #1a2535",opacity:factorsRevealed>=i+1?1:0.15,transform:factorsRevealed>=i+1?"translateY(0)":"translateY(8px)",transition:"all 0.5s ease"}}>
                    <div style={{display:"flex",alignItems:"center",gap:8,marginBottom:10}}>
                      <span style={{fontSize:16}}>{f.icon}</span>
                      <span style={{fontWeight:600,fontSize:13,color:GREEN}}>{f.label}</span>
                      <span style={{marginLeft:"auto",fontSize:12,fontWeight:700,fontFamily:MONO,color:GREEN}}>{factorBarsAnimated?f.score:0}/100</span>
                    </div>
                    <div style={{height:6,background:"#1a2535",borderRadius:3,overflow:"hidden",marginBottom:8}}>
                      <div style={{width:factorBarsAnimated?f.score+"%":"0%",height:"100%",background:"linear-gradient(90deg, #4ade80, #22c55e)",borderRadius:3,transition:"width 1s ease-out "+i*0.15+"s"}} />
                    </div>
                    <span style={{fontSize:11,color:"#5a7a8a",lineHeight:1.5}}>{f.hint}</span>
                  </div>);
              })}
            </div>
            {factorBarsAnimated && <div style={{background:"#0a1218",borderRadius:10,padding:"14px 18px",marginBottom:24,animation:"fadeIn 0.5s",border:"1px solid #1e3045",textAlign:"center"}}>
              <div style={{fontSize:11,color:"#5a7a8a",marginBottom:8,fontWeight:500}}>{t.formulaTitle}</div>
              <div style={{fontFamily:MONO,fontSize:isMobile?12:14,color:"#b0c8e0",display:"flex",alignItems:"center",justifyContent:"center",gap:isMobile?4:6,flexWrap:"wrap"}}>
                {[60,75,45,20].map(function(v,i){return (
                  <span key={i}>
                    {i>0&&<span style={{color:"#3a4a5a"}}> + </span>}
                    <span style={{color:GREEN}}>{v}</span>
                    <span style={{color:"#5a7a8a"}}> x {[0.3,0.25,0.25,0.2][i]}</span>
                  </span>);})}
                <span style={{color:"#3a4a5a"}}> = </span>
                <span style={{color:scoreColor(52),fontWeight:700,fontSize:16}}>52</span>
              </div>
              <div style={{display:"flex",justifyContent:"center",gap:16,marginTop:8,fontSize:10,color:"#4a5a6a"}}>
                {t.formulaWeights.map(function(w,i){return <span key={i}>{FACTOR_ICONS[i]} {w}</span>;})}
              </div>
            </div>}
            {finalScorePhase && <div style={{display:"flex",justifyContent:"center",gap:isMobile?20:40,flexWrap:"wrap",flexDirection:isMobile?"column":"row",alignItems:isMobile?"center":"flex-start",animation:"fadeInUp 0.5s ease"}}>
              <div style={{textAlign:"center"}}>
                <div style={{position:"relative",width:150,height:150,margin:"0 auto 12px"}}>
                  <svg width="150" height="150" viewBox="0 0 150 150">
                    <circle cx="75" cy="75" r="62" fill="none" stroke="#1a2535" strokeWidth="8" />
                    <circle cx="75" cy="75" r="62" fill="none" stroke={scoreColor(visibilityScore)} strokeWidth="8" strokeLinecap="round" strokeDasharray={(visibilityScore/100)*389.6+" 389.6"} transform="rotate(-90 75 75)" style={{transition:"stroke-dasharray 0.08s linear, stroke 0.3s"}} />
                  </svg>
                  <div style={{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}}>
                    <span style={{fontSize:40,fontWeight:700,color:scoreColor(visibilityScore),fontFamily:MONO,animation:visibilityScore===52?scoreGlowAnim(52):"none"}}>{visibilityScore}%</span>
                    <span style={{fontSize:10,color:"#5a7a8a",fontWeight:500}}>≈†KODA</span>
                  </div>
                </div>
                <div style={{fontSize:15,fontWeight:600,color:scoreColor(52)}}>{t.scoreLabel}</div>
              </div>
              <div style={{textAlign:"left",minWidth:isMobile?"100%":260,display:"flex",flexDirection:"column",justifyContent:"center"}}>
                <div style={{display:"flex",alignItems:"center",gap:8,marginBottom:12}}>
                  <div style={{width:12,height:12,borderRadius:"50%",background:scoreColor(52),boxShadow:"0 0 8px "+scoreColor(52)}} />
                  <span style={{fontSize:14,fontWeight:600,color:scoreColor(52)}}>{t.scoreSummaryTitle}</span>
                </div>
                <div style={{fontSize:13,color:"#7b8fa3",lineHeight:1.6,marginBottom:12}}>{t.scoreSummaryText}</div>
                <div style={{padding:"10px 14px",background:"#0d1520",borderRadius:8,fontSize:12,color:"#7b8fa3",lineHeight:1.6}}>{t.scoreFinalHint}</div>
              </div>
            </div>}
          </div>}
        </div>

        {/* Controls */}
        <div style={{textAlign:"center",marginTop:24}}>
          {phase==="idle" && <div style={{animation:"fadeIn 0.4s"}}>
            <button onClick={startIntro} style={{background:"linear-gradient(135deg, #4ade80, #22c55e)",color:"#0a1520",border:"none",borderRadius:14,padding:"16px 44px",fontSize:17,fontWeight:700,cursor:"pointer",fontFamily:"inherit",transition:"all 0.3s",animation:"btnPulse 2.5s infinite"}}>{t.startBtn}</button>
            <p style={{color:"#5a7a8a",marginTop:12,fontSize:isMobile?12:13}}>{t.startHint}</p>
          </div>}
          {phase==="intro" && <div style={{animation:"fadeIn 0.3s"}}><span style={{display:"inline-flex",alignItems:"center",gap:8,fontSize:14,color:GREEN,background:"#111d2e",padding:"10px 24px",borderRadius:20,border:"1px solid #4ade8033"}}><span style={{animation:"dotPulse 0.8s infinite"}}>‚óè</span>{t.introLoading}</span></div>}
          {canAdvance && <div style={{animation:"fadeIn 0.4s"}}>
            <button onClick={advanceStep} style={{background:"linear-gradient(135deg, #4ade80, #22c55e)",color:"#0a1520",border:"none",borderRadius:14,padding:"16px 40px",fontSize:16,fontWeight:700,cursor:"pointer",fontFamily:"inherit",transition:"all 0.3s",animation:"btnPulse 2.5s infinite"}}>
              {phase==="ready" ? t.steps[0].btnText+"  (1/5)" : (t.steps[nsi] ? t.steps[nsi].btnText : "")+"  ("+(nsi+1)+"/5)"}
            </button>
          </div>}
          {stepAnimating&&currentStep>=0&&<div style={{animation:"fadeIn 0.3s",marginTop:12}}><span style={{display:"inline-flex",alignItems:"center",gap:8,fontSize:13,color:STEP_COLORS[currentStep],background:"#111d2e",padding:"8px 20px",borderRadius:20,border:"1px solid "+STEP_COLORS[currentStep]+"33"}}><span style={{animation:"dotPulse 0.8s infinite"}}>‚óè</span>{t.steps[currentStep] ? t.steps[currentStep].btnText : ""}...</span></div>}

          {isFinished && <div style={{animation:"fadeIn 0.5s"}}>
            <div style={{display:"flex",gap:12,justifyContent:"center",flexWrap:"wrap"}}>
              {!showWhyImportant && <button onClick={function(){setShowWhyImportant(true);scrollToBottom();}} style={{background:"linear-gradient(135deg, #4ade80, #22c55e)",color:"#0a1520",border:"none",borderRadius:12,padding:"14px 32px",fontSize:15,fontWeight:700,cursor:"pointer",fontFamily:"inherit",transition:"all 0.3s",animation:"btnPulse 2.5s infinite"}}>{t.whyBtn}</button>}
              <button onClick={reset} style={{background:"transparent",color:GREEN,border:"1px solid #4ade8044",borderRadius:12,padding:"14px 32px",fontSize:14,fontWeight:600,cursor:"pointer",fontFamily:"inherit",transition:"all 0.3s"}}>{t.restartBtn}</button>
            </div>
            {showWhyImportant && <div style={{marginTop:20,animation:"fadeInUp 0.6s",background:CARD_BG,border:"1px solid #4ade8033",borderRadius:isMobile?12:16,padding:isMobile?18:28,maxWidth:900,textAlign:"left"}}>
              <div style={{display:"flex",alignItems:"center",gap:10,marginBottom:isMobile?14:20}}>
                <span style={{fontWeight:700,fontSize:isMobile?15:18,color:GREEN}}>{t.whyTitle}</span>
              </div>
              <div style={{background:"#0d1520",borderRadius:12,padding:isMobile?14:20,marginBottom:14,borderLeft:"3px solid "+GREEN}}>
                <div style={{fontWeight:700,fontSize:isMobile?13:15,color:GREEN,marginBottom:10}}>{t.whyATitle}</div>
                <div style={{fontSize:isMobile?13:14,color:"#8899aa",lineHeight:1.8}}>{t.whyAText}</div>
              </div>
              <div style={{background:"#0d1520",borderRadius:12,padding:isMobile?14:20,borderLeft:"3px solid "+RED}}>
                <div style={{fontWeight:700,fontSize:isMobile?13:15,color:RED,marginBottom:10}}>{t.whyBTitle}</div>
                <div style={{fontSize:isMobile?13:14,color:"#8899aa",lineHeight:1.8}}>
                  {t.whyBItems.map(function(item,i){return (
                    <div key={i} style={{display:"flex",gap:10,alignItems:"flex-start",marginBottom:i<3?10:0}}>
                      <span style={{color:RED,fontSize:16,flexShrink:0}}>x</span>
                      <span><span style={{color:RED,fontWeight:600}}>{item[0]}</span> - {item[1]}</span>
                    </div>);})}
                </div>
              </div>
              <div style={{marginTop:16,textAlign:"center",fontSize:13,color:"#5a7a8a",padding:"12px 16px",background:"#0a1218",borderRadius:10,border:"1px solid #1e3045"}}>{t.whyConclusion}</div>
            </div>}
          </div>}
        </div>
        <div ref={bottomRef} style={{height:1}} />
      </div>
      <div style={{textAlign:"center",marginTop:40,fontSize:11,color:"#3a4a5a",position:"relative",zIndex:1}}>{t.footer}</div>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(React.createElement(App));
</script>
</body>
</html>
